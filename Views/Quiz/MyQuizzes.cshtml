@model IEnumerable<Quizadilla.Models.Quiz>

@{
    ViewData["Title"] = "Your Quizzes";
}

<h2 class="mb-4">Your Quizzes</h2>

@if (!Model.Any())
{
    <div class="alert alert-info mt-3">
        You haven't made any quizzes yet! 
        <a asp-controller="Quiz" asp-action="Create" class="fw-bold">Click here to make one</a>.
    </div>
}
else
{
<div class="ingredient-scroller">
    @foreach (var quiz in Model)
    {
        var theme = string.IsNullOrWhiteSpace(quiz.Theme) ? "tomato" : quiz.Theme; // fallback
            <div class="ingredient-card card theme-@theme">
            <div class="ingredient-top"></div>

            <div class="card-body">
                <h5 class="ingredient-title">@quiz.Title</h5>
                <div class="ingredient-meta">
                    @((!string.IsNullOrWhiteSpace(quiz.Description) && quiz.Description.Length > 80)
                                    ? (quiz.Description.Substring(0, 80) + "…")
                                    : (quiz.Description ?? "No description"))
            </div>

                <div class="ingredient-actions d-flex justify-content-between mt-3">
                    <a asp-controller="Quiz" asp-action="Quiz" asp-route-id="@quiz.QuizId" class="btn btn-primary btn-sm">Play</a>
                    <div class="d-flex gap-2">
                        <a asp-controller="Quiz" asp-action="Edit" asp-route-id="@quiz.QuizId" class="btn btn-outline-secondary btn-sm">Edit</a>
                        <form asp-controller="Quiz" asp-action="Delete" asp-route-id="@quiz.QuizId" method="post" class="d-inline">
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        }
</div>
}
